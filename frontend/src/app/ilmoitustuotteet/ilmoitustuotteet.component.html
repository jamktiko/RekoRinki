<!-- Ilmoitustuotteet komponenttissa n√§kee ne tuottet mitk√§ ovat
 myyjess√§ jakop√§iv√§ss√§ -->


<!-- Notifications komponentti logiikka -->
<!-- Notificationskomponentti ‚Üí IlmoitusTuotteetkomponentti ‚Üí 
  Tilauskomponentti (Ostoskori) ‚Üí Paymentkomponentti (Maksu) ‚Üí Vahvistus -->


<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 p-4 sm:p-6 bg-gray-50 min-h-screen">
  <!-- VASEN SIVU - Tuotteet -->
  <div *ngIf="notification" class="bg-[#f1ece4] rounded-xl shadow-md w-full max-w-[650px] mx-auto overflow-hidden">
    <!-- Kuva -->
    <img [src]="notification.notificationsImage" [alt]="notification.title" class="w-full h-64 object-cover">

    <!-- Otsikko -->
    <div class="px-6 py-4">
      <h2 class="text-2xl font-medium font-[Paprika] text-gray-900">
        {{ notification.title }}, {{ notification.location }}
      </h2>
    </div>


    <!-- Tuotelista -->
    <div class="space-y-4 px-6 py-4">
      <p class="text-lg font-semibold text-gray-800">Tuotteet</p>

      <div *ngFor="let product of relatedProducts" class="flex bg-gray-100 rounded-lg p-4 items-center">
        <!-- Kuva -->
        <div class="w-20 h-20 rounded-lg overflow-hidden bg-gray-200 flex items-center justify-center mr-4">
          <ng-container *ngIf="product.image; else noImage">
            <img [src]="product.image" [alt]="product.name" class="w-full h-full object-cover" />
          </ng-container>

          <ng-template #noImage>
            <span class="material-symbols-outlined text-gray-400 text-5xl">
              image
            </span>
          </ng-template>
        </div>

        <!-- Tuotetiedot -->
        <div class="flex-1">
          <p class="text-lg font-[Inder] text-gray-900 font-medium">
            {{ product.name }}
          </p>

          <!-- Kuvaus, jossa n√§kyy vain osa tekstist√§ jos se on pitk√§ -->
          <p class="text-sm text-gray-600 mt-1" *ngIf="product.description as desc">
            {{
            product.isExpanded
            ? desc
            : (desc.length > 100 ? (desc | slice: 0: 60) + '...' : desc)
            }}
            <a *ngIf="desc.length > 60" href="#" class="text-blue-600 hover:underline ml-1"
              (click)="toggleDescription(product, $event)">
              {{ product.isExpanded ? 'N√§yt√§ v√§hemm√§n' : 'Lis√§√§' }}
            </a>
          </p>

          <p class="text-xs text-gray-500 mt-2">
            {{ product.price }} ‚Ç¨ / {{ product.amount }} g
          </p>
        </div>

        <!-- Lis√§√§ koriin -nappi -->
        <button (click)="addToCart(product)"
          class="bg-green-400 hover:bg-green-500 text-black font-medium px-4 py-2 rounded-lg transition ml-4">
          Lis√§√§ koriin
        </button>


      </div>
    </div>





    <!-- Kuvaus -->
    <div class="px-6 py-4" *ngIf="notification.description && notification.description.length > 0">
      <h3 class="text-lg font-semibold text-gray-800 mb-3">Kuvaus</h3>
      <div class="space-y-3">
        <p *ngFor="let desc of notification.description" class="text-gray-700 text-base font-[Inder] leading-relaxed">
          {{ desc }}
        </p>
      </div>
    </div>
  </div>

  <!-- OIKEA SIVU - Tuottajan tiedot -->
  <div *ngIf="notification" class="bg-[#f1ece4] rounded-xl shadow-md w-full max-w-[656px] mx-auto overflow-hidden">
    <!-- Profiilikuva -->
    <div class="flex justify-center pt-6">
      <div
        class="w-32 h-32 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center border-4 border-white shadow-md">
        <img [src]="notification.producersImge" [alt]="notification.producers" class="w-full h-full object-cover"
          onerror="this.style.display='none'">
        <div *ngIf="!notification.producersImge" class="text-gray-400 text-center">
          <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
        </div>
      </div>
    </div>

    <!-- Tuottajan tiedot -->
    <div class="text-center px-6 pt-4">
      <h2 class="text-2xl font-bold text-gray-900 mb-3">{{ notification.producers }}</h2>
      <p class="text-gray-600 text-sm mb-2">Jakop√§iv√§: {{ notification.date }}</p>
      <p class="text-gray-800 leading-relaxed text-left"
        *ngIf="notification.description && notification.description.length > 0">
        {{ notification.description[0] }}
      </p>
    </div>

    <!-- Noutotiedot -->
    <div class="bg-[#f5f5f5] mx-6 my-6 p-5 rounded-lg"
      *ngIf="notification.pickupTimes && notification.pickupTimes.length > 0">
      <h3 class="text-lg font-bold text-gray-900 mb-3">NOUTO</h3>
      <div class="space-y-4">
        <div *ngFor="let time of notification.pickupTimes" class="text-gray-800">
          <p class="font-medium">{{ time }}</p>
          <p class="text-gray-600 text-sm">{{ notification.place }}, {{ notification.location }}</p>
        </div>
      </div>
    </div>

    <!-- Yhteystiedot -->
    <div class="px-6 pb-6">
      <h3 class="text-lg font-bold text-gray-900 mb-3">Yhteystiedot</h3>
      <div class="space-y-2 text-gray-800">
        <p class="flex items-center">
          <span class="mr-2">üìç</span>
          <!-- <span class="mr-2 ma material-symbols-outlined">location_on</span> -->
          {{ notification.place }}, {{ notification.location }}
        </p>
        <p class="flex items-center">
          <span class="mr-2">üìÖ</span>
          Voimassa: {{ notification.date }}
        </p>
      </div>
    </div>

    <!-- Lis√§kuvaus -->
    <div class="px-6 pt-4 pb-6 border-t border-gray-200"
      *ngIf="notification.description && notification.description.length > 1">
      <h3 class="text-lg font-bold text-gray-900 mb-3">Tilan tiedot</h3>
      <div class="space-y-3">
        <p *ngFor="let desc of notification.description.slice(1)" class="text-gray-800 leading-relaxed text-base">
          {{ desc }}
        </p>
      </div>
    </div>
  </div>
</div>