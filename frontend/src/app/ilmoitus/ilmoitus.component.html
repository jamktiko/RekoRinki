<!-- Ilmoitustuotteet komponenttissa n√§kee ne tuottet mitk√§ ovat
 myyjess√§ jakop√§iv√§ss√§ -->


<!-- Notifications komponentti logiikka -->
<!-- Notificationskomponentti ‚Üí IlmoitusTuotteetkomponentti ‚Üí 
  Tilauskomponentti (Ostoskori) ‚Üí Paymentkomponentti (Maksu) ‚Üí Vahvistus -->


<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 p-4 sm:p-6 min-h-screen">
  <!-- VASEN SIVU - Tuotteet -->
  <div *ngIf="notification" class="bg-[#f1ece4] rounded-xl shadow-md w-full sm:max-w-[650px] mx-auto overflow-hidden">
    <!-- Kuva -->
    <img [src]="notification.kuva" alt="Tuotekuva" title="notifications.kuva" class="w-full h-64 object-cover"
      onerror="this.style.display='none'">

    <div *ngIf="!notification.kuva" class="text-gray-500 text-center p-4">
      <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
        </path>
      </svg>
      <p class="text-sm">Ei kuvaa saatavilla</p>
    </div>

    <!-- Otsikko -->
    <div class="px-6 py-4">
      <h1 class="text-2xl font-medium font-[Paprika] text-gray-900">
        {{ notification.title }}, {{ notification.maakunta }}
      </h1>
    </div>


    <!-- Tuotelista -->
    <div class="space-y-4 px-6 py-4">
      <p class="text-lg font-semibold text-gray-800">Tuotteet</p>

      <!-- <div *ngFor="let product of relatedProducts?.length > 0" -->
      <div *ngFor="let product of relatedProducts"
        class="flex items-center bg-gray-100 rounded-lg p-4 gap-3 sm:gap-4 overflow-hidden">

        <!-- kuva -->
        <div
          class="w-16 h-16 sm:w-20 sm:h-20 flex-shrink-0 rounded-lg overflow-hidden bg-gray-200 flex items-center justify-center">
          <img *ngIf="product.kuva" [src]="product.kuva" alt="Tuotekuva" class="w-full h-full object-cover"
            [title]="product.tuotteet.nimi" />

          <span *ngIf="!product.kuva" class="text-xs text-gray-500">Ei kuvaa</span>
          <!-- <div *ngIf="!product.kuva" class="text-gray-500 text-center p-4 flex flex-col justify-center">
            <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
              </path>
            </svg>
            <p class="text-sm">Ei kuvaa saatavilla</p>
          </div> -->
        </div>

        <!-- Tuotetiedot -->
        <div class="flex-1 min-w-0">
          <p class="text-sm sm:text-lg font-[Inder] text-gray-900 font-medium truncate">
            {{ product.tuotteet.nimi }}
          </p>

          <p class="text-[11px] sm:text-sm text-gray-700 leading-snug line-clamp-2">
            {{ product.tuotteet.kuvaus }}
          </p>

          <p class="text-[11px] sm:text-xs text-gray-700 mt-1">{{ product.tuotteet.yksikkohinta }} ‚Ç¨ / 500 g</p>

          <!-- N√§yt√§ m√§√§r√§ napin alla, jos > 0 -->
          <!-- <div *ngIf="getCartQuantity(product.id) > 0" class="text-sm text-gray-900 mt-1">
            {{ getCartQuantity(product.id) }} kpl ostoskorissa
          </div> -->
        </div>


        <div class="flex flex-col items-center">

          <!-- M√§√§r√§n s√§√§t√∂ laatikko -->
          <div
            class="flex items-center border-2 border-green-600 rounded-lg bg-white hover:bg-gray-50 transition-colors">
            <button (click)="removeOne(product)" aria-label="Poista yksi tuote"
              class="w-8 h-8 flex items-center justify-center hover:bg-gray-100 transition-colors rounded-l-lg">
              <span class="text-gray-700 text-lg material-symbols-outlined">remove</span>
              <!-- [class.cursor-not-allowed]="getCartQuantity(product.id) <= 0">, [disabled]="getCartQuantity(product.id) <= 0 -->
            </button>

            <!-- <span
              class="w-10 h-8 flex items-center justify-center text-gray-900 font-medium border-l border-r border-gray-300">
              {{ getCartQuantity(product.uniqueId) }}
            </span> -->

            <input *ngIf="tuoteMaaraControl[product.uniqueId]"
              class="w-10 h-8 text-gray-900 font-medium border-l border-r border-gray-300"
              [formControl]="tuoteMaaraControl[product.uniqueId]" title="tuoteMaaraControl"
              (ngModelChange)="updateCartQuantity(product, $event)" />




            <button (click)="addOne(product)" aria-label="Lis√§√§ yksi tuote"
              class="w-8 h-8 flex items-center justify-center hover:bg-gray-100 transition-colors rounded-r-lg">
              <span class="text-gray-700 text-lg material-symbols-outlined">add</span>
            </button>
          </div>

        </div>



      </div>

    </div>



    <!-- Kuvaus -->
    <!-- <div class="px-6 py-4" *ngIf="notification.Kuvaus && notification.Kuvaus.length > 0"> -->
    <!-- <div class="px-6 py-4">
      <h2 class="text-lg font-semibold text-gray-900 mb-3">Kuvaus</h2>
      <div class="space-y-3">
        <p *ngFor="let desc of notification.Kuvaus" class="text-gray-800 text-base leading-relaxed">
        <p *ngFor="let ilmoitus of ilmoitukset" class="text-gray-800 text-base leading-relaxed">
          {{ ilmoitus.kuvaus }}
        </p>
      </div>
    </div> -->

    <div class="px-6 py-4">
      <h2 class="text-lg font-semibold text-gray-900 mb-3">Kuvaus</h2>
      <!-- <p class="text-gray-800 text-base leading-relaxed">{{ notification?.kuvaus }}</p> -->
      <p class="text-gray-800 text-base leading-relaxed">{{ notification?.kuvaus }}</p>

    </div>

  </div>

  <!-- OIKEA SIVU - Tuottajan tiedot -->
  <div class="bg-[#f1ece4] rounded-xl shadow-md w-full max-w-[656px] mx-auto overflow-hidden">
    <!-- Profiilikuva -->
    <div class="flex justify-center pt-6">
      <div
        class="w-32 h-32 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center border-4 border-white shadow-md">
        <img [src]="notification?.tuottaja?.kuva" alt="tuottajakuva" class="w-full h-full object-cover"
          title="notification.tuottaja.kuva" onerror="this.style.display='none'">
        <span class="text-sm">Ei profiilikuvaa</span>
        <!-- <div *ngIf="!notification.tuottaja.kuva" class="text-gray-400 text-center">
          <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
        </div> -->
      </div>
    </div>

    <!-- Tuottajan tiedot -->
    <div class="text-center px-6 pt-4">
      <h2 class="text-2xl font-bold text-gray-900 mb-3">{{ notification?.tuottaja?.etunimi }} {{
        notification?.tuottaja?.sukunimi }}</h2>

      <div *ngIf="notification?.reitits?.length > 0" class="text-gray-800 text-sm mb-2">
        <div *ngFor="let reitti of notification.reitits">
          <p>Jakop√§iv√§: {{ reitti.jakopaiva_aika | date: 'dd.MM.yyyy' }}</p>
        </div>
      </div>


      <!-- <p *ngFor=" let product of relatedProducts" class="text-gray-800 leading-relaxed text-left">
        {{ product.tuotteet.kuvaus }}
      </p> -->
    </div>

    <!-- Noutotiedot -->

    <div class="bg-gray-100 mx-6 my-6 p-5 rounded-lg" *ngIf="notification?.reitits?.length > 0">
      <h3 class="text-lg font-bold text-gray-900">NOUTO</h3>
      <div class="space-y-4">
        <div *ngFor="let reitti of notification.reitits" class="text-gray-800 ml-4 mt-3">
          <p>{{ reitti.lisatieto }}, {{ reitti.jakopaikka }}</p>
          <p>{{ reitti.katuosoite }}, {{ reitti.postinumero }} {{ reitti.paikkakunta }}</p>
        </div>
      </div>
    </div>




    <!-- Yhteystiedot -->
    <div class="px-6 pb-6" *ngIf="notification?.reitits?.length > 0">
      <h3 class="text-lg font-bold text-gray-900 mb-3">Yhteystiedot</h3>
      <div class="space-y-2 text-gray-800" *ngFor="let reitti of notification.reitits">
        <p class="flex items-center">
          <span class="mr-2">üìç</span>
          <!-- <span class="mr-2 ma material-symbols-outlined">location_on</span> -->
          {{ reitti.jakopaikka }}
        </p>
        <p class="flex items-center">
          <span class="mr-2">üìÖ</span>

          {{ reitti.jakopaiva_aika | date: 'dd.MM.yyyy' }} - {{
          notification.voimassaolo_paattyy | date: 'dd.MM.yyyy' }}
        </p>
      </div>
    </div>

    <!-- Lis√§kuvaus -->
    <!-- <div class="px-6 pt-4 pb-6 border-t border-gray-200"
      *ngIf="notification.description && notification.description.length > 1">
      <h3 class="text-lg font-bold text-gray-900 mb-3">Tilan tiedot</h3>
      <div class="space-y-3">
        <p *ngFor="let desc of notification.description.slice(1)" class="text-gray-800 leading-relaxed text-base">
          {{ desc }}
        </p>
      </div>
    </div> -->
    <div class="ml-4">
      <h3 class="text-lg font-bold text-gray-900 mb-3 ">Tilan tiedot</h3>
      <p class="text-gray-800 leading-relaxed text-base">
        {{ notification?.tuottaja?.lisatiedot }}
      </p>
    </div>
  </div>
</div>